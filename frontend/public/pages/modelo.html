<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel Admin - Lectura de Sensores</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://demo.dashboardpack.com/architectui-html-free/main.css" rel="stylesheet">
</head>
<body>
  <div class="app-container app-theme-white body-tabs-shadow fixed-sidebar fixed-header">

    <!-- Barra lateral -->
    <div class="app-main">
      <div class="app-sidebar sidebar-shadow">
        <div class="scrollbar-sidebar">
          <div class="app-sidebar__inner">
            <ul class="vertical-nav-menu">
              <li class="app-sidebar__heading">Panel Principal</li>
              <li>
                <a href="#" class="mm-active">
                  <i class="metismenu-icon pe-7s-rocket"></i>
                  Dashboard Sensores
                </a>
              </li>
              <li class="app-sidebar__heading">Tablas</li>
              <li>
                <a href="#">
                  <i class="metismenu-icon pe-7s-display2"></i>
                  Lectura Sensores
                </a>
              </li>
              <!-- Agrega más enlaces a tablas aquí si las tienes -->
            </ul>
          </div>
        </div>
      </div>

      <!-- Contenido principal -->
      <div class="app-main__outer">
        <div class="app-main__inner">

          <!-- KPIs -->
          <div class="row">
            <div class="col-md-3">
              <div class="card mb-3 bg-danger text-white">
                <div class="card-body">
                  <h5>Income Target</h5>
                  <h2>71%</h2>
                  <div class="progress">
                    <div class="progress-bar bg-white" style="width: 71%"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card mb-3 bg-success text-white">
                <div class="card-body">
                  <h5>Expenses Target</h5>
                  <h2>54%</h2>
                  <div class="progress">
                    <div class="progress-bar bg-white" style="width: 54%"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card mb-3 bg-warning text-white">
                <div class="card-body">
                  <h5>Spendings Target</h5>
                  <h2>32%</h2>
                  <div class="progress">
                    <div class="progress-bar bg-white" style="width: 32%"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card mb-3 bg-info text-white">
                <div class="card-body">
                  <h5>Totals Target</h5>
                  <h2>89%</h2>
                  <div class="progress">
                    <div class="progress-bar bg-white" style="width: 89%"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Gráfico -->
          <div class="card mb-4">
            <div class="card-header">Gráfico de Lecturas y Pronóstico</div>
            <div class="card-body">
              <canvas id="graficoSensores" height="100"></canvas>
            </div>
          </div>

          <!-- Tabla -->
          <div class="card mb-5">
            <div class="card-header">Últimas Lecturas Registradas</div>
            <div class="card-body">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>ID Sensor</th>
                    <th>Valor</th>
                    <th>Fecha</th>
                  </tr>
                </thead>
                <tbody id="tablaSensores">
                  <!-- Aquí se insertan los datos con JS o PHP -->
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <script>
    const labels = ['10:00', '10:05', '10:10', '10:15', '10:20'];
    const datosLecturas = [22, 24, 23, 25, 28];
    const datosPronostico = [29, 30, 31];

    const ctx = document.getElementById('graficoSensores').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: labels.concat(['10:25', '10:30', '10:35']),
        datasets: [
          {
            label: 'Lecturas reales',
            data: datosLecturas.concat(null, null, null),
            borderColor: 'rgba(0,123,255,1)',
            backgroundColor: 'rgba(0,123,255,0.1)',
            tension: 0.3
          },
          {
            label: 'Pronóstico',
            data: [null, null, null, null, null].concat(datosPronostico),
            borderColor: 'rgba(255,193,7,1)',
            backgroundColor: 'rgba(255,193,7,0.1)',
            borderDash: [5, 5],
            tension: 0.3
          }
        ]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'top' } },
        scales: { y: { beginAtZero: true } }
      }
    });

    // Datos simulados para tabla (reemplazar con fetch PHP o API)
    const datosTabla = [
      { id: 'S001', valor: '24.2 °C', fecha: '2025-07-06 10:20' },
      { id: 'S002', valor: '25.0 °C', fecha: '2025-07-06 10:15' },
      { id: 'S001', valor: '23.9 °C', fecha: '2025-07-06 10:10' }
    ];
    const tabla = document.getElementById('tablaSensores');
    datosTabla.forEach(d => {
      tabla.innerHTML += `<tr><td>${d.id}</td><td>${d.valor}</td><td>${d.fecha}</td></tr>`;
    });
  </script>
</body>
</html>
